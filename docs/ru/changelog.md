# Changelog

## Version 1.6.0

Это последний масштабный апдейт. В дальнейшем, обновления будут очень маленькими, но при этом, будет возможность автоматически обновить текущй проект до последней версии TARS.

* Sourcemaps создаются только в dev-режиме.
* Пропущенные таски слегка подсвечиваются в общем логе gulp.
* Все таски для работы со стилями теперь общие для всех препроцессоров. Они больше не скачиваются и сразу находятся в TARS.
* Стили для IE9 компилятся в отдельном таске.
* Вотчеры за изменениями в стилях стали умнее. Теперь они будут вызывать только те таски, которые действительно нужны в данный момент.
* Таски для компиляции html объединены в один.
* Убрана поддержка Node.js версии ниже 0.12.x включительно.
* Оцпия инжекта css при лайврелоад вынесена в tars-config.js Если вам нужен инжект стилей при пересборке без перезагрузки страницы, то необходимо установить эту опцию в true.
* jscs + jshint были заменены на eslint. Проверка кода проходит куда быстрее. Весь код TARS также подвергается проверке eslint перед каждым коммитом.
* Появилась возможность пробрасывать данные одного модуля в данные другого с помощью функций в data.js Теперь стало легко инициализировать модули с вложенными модулями с любыми данными в handlebars.
* Рефакторинг кода. 
    - Были отрефакторены все таски. Используется ES6.
    - Ускорен запуск самой сборки. Теперь зависимости подключаются только в тот момент, когда таск запускается в первый раз. Первоначальная сборка в итоге занимает меньше времени.
    - Добавлены новые методы и свойства в tars.js:
        + метод skipTaskLog — выводит лог о пропущенных тасках с информацией о причинах пропуска;
        + хелпер skipTaskWithEmptyPipe — позволяет пропустить таск, если в pipe не было передано ни одного файла.
        + Свойство root — хранит путь от корня ОС до папки tars, включая саму папку.
        + Свойство isDevMode — возвращает результат выражения !tars.flags.release && !tars.flags.min
* Появилась возможность использовать css-файлы отдельно от общего бандла.
* Весь js-код из папки static по умолчанию находится в ignore в babelrc. Сам babel обновлен до 6 версии. Если вы хотите испольовать самый последний TARS-CLI, в старых проектах необходимо поправить конфиг .babelrc, так как это сделано в текущей версии. По умолчанию TARS-CLI сам попытается это сделать, но в случае ошибки это придется сделать пользователю.
* Обновление шаблона страницы и модуля head. Убраны лишние аттрибуты, приведено к виду в html5boilerplate последней версии.
* Хелперы для handlebars теперь всегда находятся в проекте. Подключаются только в случае использования handlebars в качестве шаблонизатора.
* Вместо префиксов %=staticPrefixForCss=% и %=staticPrefix=% можно использовать просто %=static=% как в html, так и в css. Старые префиксы работают, но лучше использовать новый вариант.
* normalize обновлен до 3.0.3
* Добавлена возможность удобно использовать кастомные хелперы для handlebars.
* В данных всегда генерируется массив с информацией о всех страницах проекта.
* Обновленна документация.

## Version 1.5.0

* Пофиксил установку в npm3. В том случае, если у вас есть проект, который был разработан на TARS 1.4.1 и npm2, а сейчас вы используете npm3, необходимо заменить одну строку в tars/tars.js:
```javascript
handlebars: tars.require('gulp-compile-handlebars/node_modules/handlebars'),
// заменить на 
handlebars: tars.require('handlebars'),
```
* Используется Handlebars из отдельно установленного пакета, а не из gulp-handlebars.
* Добавлена возможность использования css-файлов в папке etc.

## Version 1.4.1

* Добавлен понятный лог при ошибках в css.
* Обновлена [документация по использованию Babel](js-processing.md).
* Поправлен конфиг html-prettify.
* Нотификации при ошибках появляются, даже если они отключены.
* Обновлены версии зависимостей, пофикшены баги.

## Version 1.4.0

* Добавлена возможность использовать import в css. Css (less, scss, sass, styl) файлы с _ в начале файла не компилируются. Только их рекомендуется импортировать. [Подробности в документации](css-processing.md).
* Добавлена поддержка .sass расширения для файлов стилей.
* Обновлен tars-config. Поле [sourcemaps](options.md#sourcemaps) теперь имеет больше опций. Добавлен конфиг включения [Babel](options.md#usebabel).
* Добавлена поддержка синтаксиса ES6(ES.Next) с помощью [Babel](options.md#usebabel). [Подробности в документации](js-processing.md).
* Автопрефиксер вставляется самым последним, сразу после всех используемых постпроцессоров. 
* Notifier получил единый интерфейс. При отключенных нотификациях теперь не будет вообще никаких уведомлений в системе, даже при ошибках. Ошибки будут отображаться только в консоли. При включенных все будет как обычно. Поменялся формат нотификаций в системе, теперь выводится иконка TARS.
* Добавлен gulp-html-prettify. Теперь скомпилированный html будет отформатирован, если опция [minifyHtml](options.md#minifyhtml) установлена в false.
* Стили для IE9 не собираются автоматически. Для того, чтобы получить сборку теперь необходимо использовать флаг `--ie9` или `--ie`, чтобы собрать под IE8 и IE9.
* Добавлены хелперы для handlebars. Описана возможность добавления своих хелперов. Хелперы перенесены в репозиторий tars-handlebars и находятся ряом с таском.

## Version 1.3.1

* Фикc конфига для postCSS. Теперь не надо руками реквайрить постопроцессоры. Вы просто перечисляете процессоры, которые хотите использовать в конфиге и все. Но не забудьте установить используемые постпроцессоры.

## Version 1.3.0

* Добавлены sourcemaps для js. Теперь можно увидеть не только файл из исходников, но даже путь до этого файла.
* Добавлен PostCSS и возможность добавлять свои постпроцессоры. Отдельно использовать PostCSS пока нельзя. Только совместно с каким-либо препроцессором.
* Убраны нотификации во время сборки. Теперь они будут появляться только тогда, когда они действительно нужны.
* Добавлена пожжержка расширения .hbs для handlebars-шаблонов.
* Добавлен padding между картинками в растровом спрайте.
* Отрефакторены основные модули и страницы.
* Теперь browser-sync открывает бразер, устанвленный в системе по умолчанию, если не указано иначе.
* Созадана новая сущность, tars, которая содержит в себе все элементы, необходимые сборщику.
* Создан TARS-CLI.
* Поправлены различные баги.

## Version 1.2.7

* Поправлен баг в gulp-svg-spritesheet.

## Версия 1.2.6

* Поправлен баг нотификацией, когда она отключена.

## Версия 1.2.4

* Поправлен баг с инициализацией TARS.
* Исправлена ошибка при собирании png-спрайта

## Версия 1.2.3

* Починил баг работы TARS  c выкюченным нотификатором.

## Версия 1.2.2

* Внесен фикс в вотчер assets-файлов модуля. На данный момент поддиректории в папке assets в модуле не поддерживаются.

## Версия 1.2.1

* Обновлен code-style. Обновлен .jscsrc
* Добавлено описание workflow для контрибутеров.
* Убрал модуль path из зависимостей.
* Добавлены доки на английском языке.

## Версия 1.2.0

* Новая версия BrowserSync.
* Опция baseDir для browser-sync перемещена в tars-config.
* Вотчеры используют модуль [chokidar](https://github.com/paulmillr/chokidar)
* Все вотчеры переехали в отдельные файлы в папку tars/watchers.
* Сделана автозагрузка вотчеров и тасков в gulpfile.
* Таск 'builder-start-screen' переехал в tars/tasks/services.
* Добавлены новые хэлперы в handlebars (и документация по ним). Все хелперы хранятся в отдельном файле tars/helpers/handlebars-helpers.js
* Добавлена папка framework по пути markup/static/js Папка предназначена для js-файлов используемого фреймворка.
* Обновлены зависимости.
* Изменился синтаксис подключения модулей при использовании Handlebars. Старый синтаксис:
```handlebars
{{> modules/head/head head.defaults}}
```

Новый:
```handlebars
{{> head/head head.defaults}}
```

* Больше нет отдельного таска для компилирования стилей для ie9. Стили для ie9 компилируются в рамках таска компилирования стилей для всех современных браузеров. Отдельный файл создается.
* Поменялся workflow подготовки svg-графики. Кодирование в base64 было заменено на отдельный svg-sprite. Использование в коде не изменилось. 
* mData/mData.js –> data/data.js

## Версия 1.1.1

* Исправлен баг в таске переноса js из separate-js. Было указано старое название папки.

## Версия 1.1.0

* Добавлен user-package.json для пользовательских зависимостей. Изменения в tars/helpers/install-additional-deps.js
* Добавлено [руководство по обновлению TARS](update-guide.md)
* Обновлен модуль gulp-sass.
* Генерация версии сборки перенесена в отдельный хелпер, что упрощает ее кастомизацию. Находится тут: tars/helpers/set-build-version.js
